@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

.features {
	padding: $spacing-3xl 0;
	@include shape($overflow: hidden);
}

.features-header {
	text-align: center;
	margin-bottom: $spacing-xl;
}

.tab-input {
	@include layout(none);
}

.tab-buttons {
	@include layout(flex, $flex-direction: column);
	margin-bottom: $spacing-2xl;
}

.tab-btn {
	@include layout($position: relative);
	border-bottom: 1px solid $grayish-blue-transparent;
	background: transparent;
	border: none;
	padding: $spacing-sm;
	font-size: $font-size-base;
	color: $grayish-blue;
	cursor: pointer;
	transition: color 0.3s ease;
	text-align: center;

	&:last-child {
		border-bottom: 1px solid $grayish-blue-transparent;
	}

	&:hover {
		color: $soft-red;
	}

	&:focus {
		outline: 2px solid $soft-blue;
		outline-offset: 2px;
	}

	&::after {
		@include layout($position: absolute);
		@include coordinates($bottom: 0, $left: 50%);
		@include size(0, 4px);
		content: '';
		transform: translateX(-50%);
		background: $soft-red;
		transition: width 0.3s ease;
	}
}

#tab1:checked~.tab-buttons label[for='tab1'],
#tab2:checked~.tab-buttons label[for='tab2'],
#tab3:checked~.tab-buttons label[for='tab3'] {
	color: $very-dark-blue;

	&::after {
		@include size(140px);
	}
}

.tab-pane {
	@include layout(none);
	animation: fadeIn 0.5s ease;
}

#tab1:checked~.tab-content #content1,
#tab2:checked~.tab-content #content2,
#tab3:checked~.tab-content #content3 {
	@include layout(block);
}

@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(10px);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.feature-content {
	@include layout(flex, $flex-direction: column);
	gap: $spacing-2xl;
	text-align: center;
}

.feature-image {
	@include layout($position: relative);

	img {
		@include size($max-width-percentage, $max-width: 400px);
		margin: 0 auto;
	}
}

#content1 .feature-image::before,
#content2 .feature-image::before,
#content3 .feature-image::before {
	@include layout($position: absolute, $z-index: -1);
	@include size($max-width-percentage, 85%);
	@include coordinates(15%, $left: -50%);
	content: '';
	background: $soft-blue;
	border-radius: 0 $border-radius-lg $border-radius-lg 0;
}

.feature-text {
	p {
		margin-bottom: 35px;
	}
}

@media (min-width: $breakpoint-tablet) {
	.tab-buttons {
		@include layout($flex-direction: row);
		@include flex-layout(center);
		border-bottom: 1px solid $grayish-blue-transparent;
	}

	.tab-btn {
		@include size($max-width: 243px);
		border: none;
		padding: $spacing-sm $spacing-lg;
		flex: 1;

		&:last-child {
			border-bottom: none;
		}
	}

	#tab1:checked~.tab-buttons label[for='tab1']::after,
	#tab2:checked~.tab-buttons label[for='tab2']::after,
	#tab3:checked~.tab-buttons label[for='tab3']::after {
		@include size($max-width-percentage);
	}
}

@media (min-width: $breakpoint-desktop) {
	.features {
		@include shape($overflow: visible);
	}

	.tab-content {
		@include shape($overflow: visible);
	}

	.feature-content {
		@include layout($flex-direction: row);
		@include flex-layout($ai: center);
		text-align: left;
		gap: 100px;
	}

	.feature-image {
		@include layout($position: relative);
		@include size($min-width: 0);
		flex: 1;

		&::before {
			@include layout($position: absolute, $z-index: -1);
			@include coordinates(20%, $left: -80%);
			@include size(150%, 80%);
			content: '';
			background: $soft-blue;
			border-radius: 0 300px 300px 0;
		}
	}

	#content1 .feature-image::before,
	#content2 .feature-image::before,
	#content3 .feature-image::before {
		@include coordinates(20%, $left: -80%);
		@include size($max-width-percentage, 80%);
		border-radius: 0 300px 300px 0;
	}

	.feature-text {
		flex: 1;
	}
}
